{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/houss/Desktop/smartMaint/frontend/src/store/auth-store.ts"],"sourcesContent":["import { create } from 'zustand';\r\nimport { persist, createJSONStorage } from 'zustand/middleware';\r\n\r\ninterface User {\r\n  id: string;\r\n  email: string;\r\n  username: string;\r\n  role: string;\r\n  fullName?: string;\r\n}\r\n\r\ninterface AuthState {\r\n  user: User | null;\r\n  token: string | null;\r\n  isAuthenticated: boolean;\r\n  setAuth: (user: User, token: string) => void;\r\n  logout: () => void;\r\n}\r\n\r\nexport const useAuthStore = create<AuthState>()(\r\n  persist(\r\n    (set) => ({\r\n      user: null,\r\n      token: null,\r\n      isAuthenticated: false,\r\n      setAuth: (user, token) => {\r\n        localStorage.setItem('token', token);\r\n        // Set cookies for middleware access\r\n        if (typeof document !== 'undefined') {\r\n          document.cookie = `token=${token}; path=/; max-age=604800; SameSite=Lax`;\r\n          document.cookie = `userRole=${user.role}; path=/; max-age=604800; SameSite=Lax`;\r\n        }\r\n        set({ user, token, isAuthenticated: true });\r\n      },\r\n      logout: () => {\r\n        localStorage.removeItem('token');\r\n        // Clear cookies\r\n        if (typeof document !== 'undefined') {\r\n          document.cookie = 'token=; path=/; max-age=0';\r\n          document.cookie = 'userRole=; path=/; max-age=0';\r\n        }\r\n        set({ user: null, token: null, isAuthenticated: false });\r\n      },\r\n    }),\r\n    {\r\n      name: 'auth-storage',\r\n      storage: createJSONStorage(() => localStorage),\r\n    },\r\n  ),\r\n);\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAkBO,MAAM,eAAe,IAAA,qKAAM,IAChC,IAAA,2JAAO,EACL,CAAC,MAAQ,CAAC;QACR,MAAM;QACN,OAAO;QACP,iBAAiB;QACjB,SAAS,CAAC,MAAM;YACd,aAAa,OAAO,CAAC,SAAS;YAC9B,oCAAoC;YACpC,IAAI,OAAO,aAAa,aAAa;gBACnC,SAAS,MAAM,GAAG,CAAC,MAAM,EAAE,MAAM,sCAAsC,CAAC;gBACxE,SAAS,MAAM,GAAG,CAAC,SAAS,EAAE,KAAK,IAAI,CAAC,sCAAsC,CAAC;YACjF;YACA,IAAI;gBAAE;gBAAM;gBAAO,iBAAiB;YAAK;QAC3C;QACA,QAAQ;YACN,aAAa,UAAU,CAAC;YACxB,gBAAgB;YAChB,IAAI,OAAO,aAAa,aAAa;gBACnC,SAAS,MAAM,GAAG;gBAClB,SAAS,MAAM,GAAG;YACpB;YACA,IAAI;gBAAE,MAAM;gBAAM,OAAO;gBAAM,iBAAiB;YAAM;QACxD;IACF,CAAC,GACD;IACE,MAAM;IACN,SAAS,IAAA,qKAAiB,EAAC,IAAM;AACnC"}},
    {"offset": {"line": 53, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/houss/Desktop/smartMaint/frontend/src/app/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useAuthStore } from '@/store/auth-store';\r\n\r\nexport default function Home() {\r\n  const router = useRouter();\r\n  const { isAuthenticated, user } = useAuthStore();\r\n  const [isHydrated, setIsHydrated] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Wait for Zustand to hydrate from localStorage\r\n    setIsHydrated(true);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!isHydrated) return;\r\n\r\n    if (isAuthenticated && user) {\r\n      // Redirect based on role\r\n      if (user.role === 'admin') {\r\n        router.push('/dashboard/admin');\r\n      } else if (user.role === 'technician') {\r\n        router.push('/dashboard/technician');\r\n      } else {\r\n        router.push('/dashboard/worker');\r\n      }\r\n    } else {\r\n      router.push('/login');\r\n    }\r\n  }, [isHydrated, isAuthenticated, user, router]);\r\n\r\n  return (\r\n    <main className=\"flex min-h-screen flex-col items-center justify-center p-24\">\r\n      <div className=\"text-center\">\r\n        <p className=\"text-gray-900\">Redirecting...</p>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAMe,SAAS;;IACtB,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,EAAE,eAAe,EAAE,IAAI,EAAE,GAAG,IAAA,gJAAY;IAC9C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAE7C,IAAA,0KAAS;0BAAC;YACR,gDAAgD;YAChD,cAAc;QAChB;yBAAG,EAAE;IAEL,IAAA,0KAAS;0BAAC;YACR,IAAI,CAAC,YAAY;YAEjB,IAAI,mBAAmB,MAAM;gBAC3B,yBAAyB;gBACzB,IAAI,KAAK,IAAI,KAAK,SAAS;oBACzB,OAAO,IAAI,CAAC;gBACd,OAAO,IAAI,KAAK,IAAI,KAAK,cAAc;oBACrC,OAAO,IAAI,CAAC;gBACd,OAAO;oBACL,OAAO,IAAI,CAAC;gBACd;YACF,OAAO;gBACL,OAAO,IAAI,CAAC;YACd;QACF;yBAAG;QAAC;QAAY;QAAiB;QAAM;KAAO;IAE9C,qBACE,6LAAC;QAAK,WAAU;kBACd,cAAA,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAE,WAAU;0BAAgB;;;;;;;;;;;;;;;;AAIrC;GAlCwB;;QACP,kJAAS;QACU,gJAAY;;;KAFxB"}},
    {"offset": {"line": 138, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/houss/Desktop/smartMaint/frontend/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0]}}]
}